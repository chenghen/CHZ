(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-ebe9a5ba"],{"129f":function(t,a){t.exports=Object.is||function(t,a){return t===a?0!==t||1/t===1/a:t!=t&&a!=a}},"2d3b":function(t,a,e){"use strict";e.r(a);var n=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"search"},[e("van-nav-bar",{attrs:{title:"搜索页","left-text":"返回","left-arrow":"",fixed:!0},on:{"click-left":t.back}}),e("div",[e("van-search",{attrs:{placeholder:"请输入商品名称",shape:"round",autofocus:"","show-action":"",maxlength:"10"},on:{input:t.gosearch},scopedSlots:t._u([{key:"action",fn:function(){return[e("div",{on:{click:t.onSearch}},[t._v("搜索")])]},proxy:!0}]),model:{value:t.searchValue,callback:function(a){t.searchValue=a},expression:"searchValue"}}),t.isShow?t._e():e("ul",{staticClass:"search-text"},t._l(t.arrByZM,(function(a,n){return e("li",{key:n,on:{click:function(e){return t.viewProductInfo(a.pid)}}},[e("span",[e("van-icon",{attrs:{name:"search",size:"16px"}})],1),t._v(" "+t._s(a.name)+" ")])})),0),t.isShow?e("div",{staticClass:"menu-list"},[e("van-skeleton",{attrs:{row:6,loading:t.isLoading}},t._l(t.searchData,(function(a,n){return e("van-card",{key:n,attrs:{centered:"",tag:"hot",price:a.price,desc:a.enname,title:a.name,"lazy-load":""},scopedSlots:t._u([{key:"thumb",fn:function(){return[e("img",{staticClass:"auto-img",attrs:{src:a.smallImg,alt:""},on:{click:function(e){return t.goProductInfo(a.pid)}}})]},proxy:!0},{key:"num",fn:function(){return[e("van-button",{attrs:{size:"small",color:"#0b34ba",icon:"cart",round:"",type:"default"},on:{click:function(e){return t.viewProductInfo(a.pid)}}},[t._v("加入购物车")])]},proxy:!0},{key:"tags",fn:function(){return[e("van-tag",{attrs:{plain:"",type:"danger"}},[t._v(t._s(a.typeDesc))])]},proxy:!0}],null,!0)})})),1)],1):t._e(),""==t.searchValue?e("div",{staticClass:"search-box"},[e("div",{staticClass:"search-hot"},[e("div",{staticClass:"search-hot-title"},[t._v("热门搜索")]),e("div",{staticClass:"search-hot-box"},t._l(t.hotrList,(function(a,n){return e("van-button",{key:n,attrs:{type:"default"},on:{click:function(e){return t.viewProductInfo(a.pid)}}},[t._v(t._s(a.name))])})),1)]),e("div",{staticClass:"search-history"},[e("div",{staticClass:"search-history-title"},[t._v(" 历史搜索 "),e("span",{staticClass:"fr"},[e("van-icon",{attrs:{name:"delete",size:"20"},on:{click:t.clearHistory}})],1)]),e("div",{staticClass:"search-history-box"},t._l(t.history,(function(a,n){return e("van-button",{key:n,attrs:{type:"default"},on:{click:function(e){return t.viewProductInfo(a.pid)}}},[t._v(t._s(a.name))])})),1)])]):t._e()],1)],1)},s=[],i=(e("d81d"),e("b0c0"),e("ac1f"),e("841c"),e("4de5"),{naem:"Search",data:function(){return{searchValue:"",hotrList:[],name:"",arrByZM:[],history:[],isLoading:!0,searchData:[],isShow:!1}},created:function(){this.getHot(),this.historyInit()},methods:{historyInit:function(){var t=sessionStorage.getItem(history);t&&(this.history=JSON.parse(t))},onSearch:function(){this.isShow=!0,""!=this.searchValue&&(this.searchData=[],this.isLoading=!0,this.gosearch(),this.searchData=this.arrByZM)},getHot:function(){var t=this;this.$toast.loading({message:"加载中...",forbidClick:!0,duration:0,loadingType:"spinner"}),this.axios({method:"GET",url:"/typeProducts",params:{appkey:this.appkey,key:"isHot",value:1}}).then((function(a){t.$toast.clear(),500==a.data.code&&(t.hotrList=a.data.result)})).catch((function(a){t.$toast.clear()}))},gosearch:function(){var t=this,a=localStorage.getItem("CSTK");a&&(this.$toast.loading({message:"加载中...",forbidClick:!0,duration:0,loadingType:"spinner"}),this.axios({method:"GET",url:"/search",params:{appkey:this.appkey,name:name}}).then((function(a){if(t.$toast.clear(),t.arrByZM=[],t.isLoading=!1,""!=t.searchValue)for(var e=0;e<a.data.result.length;e++)console.log(" result.data.result :>> ",a.data.result),-1!=a.data.result[e].name.search(t.searchValue)&&t.arrByZM.push(a.data.result[e]);else t.isShow=!1})).catch((function(a){t.$toast.clear()})))},viewProductInfo:function(t){var a=this;this.arrByZM.map((function(e){e.pid==t&&(a.history.push(e),sessionStorage.setItem(history,JSON.stringify(a.history)))})),this.$router.push({name:"Detail",query:{pid:t}})},clearHistory:function(){var t=this;this.history.length<1?this.$toast.fail("已经为空"):this.$dialog.confirm({message:"清空历史记录？"}).then((function(){sessionStorage.removeItem(history),t.history=[]})).catch((function(){}))},back:function(){this.$router.go(-1)}}}),r=i,o=e("2877"),c=Object(o["a"])(r,n,s,!1,null,"001d593a",null);a["default"]=c.exports},"4de5":function(t,a,e){},"841c":function(t,a,e){"use strict";var n=e("d784"),s=e("825a"),i=e("1d80"),r=e("129f"),o=e("14c3");n("search",1,(function(t,a,e){return[function(a){var e=i(this),n=void 0==a?void 0:a[t];return void 0!==n?n.call(a,e):new RegExp(a)[t](String(e))},function(t){var n=e(a,t,this);if(n.done)return n.value;var i=s(t),c=String(this),u=i.lastIndex;r(u,0)||(i.lastIndex=0);var l=o(i,c);return r(i.lastIndex,u)||(i.lastIndex=u),null===l?-1:l.index}]}))},b0c0:function(t,a,e){var n=e("83ab"),s=e("9bf2").f,i=Function.prototype,r=i.toString,o=/^\s*function ([^ (]*)/,c="name";n&&!(c in i)&&s(i,c,{configurable:!0,get:function(){try{return r.call(this).match(o)[1]}catch(t){return""}}})},d81d:function(t,a,e){"use strict";var n=e("23e7"),s=e("b727").map,i=e("1dde"),r=e("ae40"),o=i("map"),c=r("map");n({target:"Array",proto:!0,forced:!o||!c},{map:function(t){return s(this,t,arguments.length>1?arguments[1]:void 0)}})}}]);
//# sourceMappingURL=chunk-ebe9a5ba.41ae84ac.js.map