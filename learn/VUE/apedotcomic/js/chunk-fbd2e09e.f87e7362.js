(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-fbd2e09e"],{"4c16":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"account"},[a("van-nav-bar",{attrs:{title:"个人资料","left-text":"返回","left-arrow":"",fixed:!0},on:{"click-left":t.back}}),a("div",{staticClass:"account-bg"}),a("div",{staticClass:"list-box"},[a("van-cell",{attrs:{title:"头像"}},[a("div",{staticClass:"avatar fr"},[a("img",{staticClass:"auto-img",attrs:{src:t.userInfo.userImg,alt:""}}),a("van-uploader",{staticClass:"uploader-box",attrs:{"after-read":t.uploadUserImg}})],1)]),a("van-cell",{attrs:{title:"用户id"}},[a("div",{staticClass:"fr"},[t._v(t._s(t.userInfo.userId))])]),a("van-cell",{attrs:{title:"手机号"}},[a("div",{staticClass:"fr"},[t._v(t._s(t.userInfo.phone))])]),a("van-cell",{attrs:{title:"昵称"}},[a("div",{staticClass:"fr"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.userInfo.nickName,expression:"userInfo.nickName"}],staticClass:"nickname",attrs:{type:"text"},domProps:{value:t.userInfo.nickName},on:{change:function(e){return t.modifyUserInfo("nickName","/updateNickName")},input:function(e){e.target.composing||t.$set(t.userInfo,"nickName",e.target.value)}}})])]),a("div",{staticClass:"desc-box"},[a("div",{staticClass:"desc-title"},[t._v("简介")]),a("div",[a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.userInfo.desc,expression:"userInfo.desc"}],staticClass:"text-area",attrs:{placeholder:"这家伙很懒，什么都没有留下"},domProps:{value:t.userInfo.desc},on:{change:function(e){return t.modifyUserInfo("desc","/updateDesc")},input:function(e){e.target.composing||t.$set(t.userInfo,"desc",e.target.value)}}})])])],1)],1)},i=[],n=(a("c975"),a("a15b"),a("ac1f"),a("5319"),a("1276"),a("ade3")),r=(a("f737"),a("2f14")),o={data:function(){return{userInfo:{},maxSize:1048576}},created:function(){this.getUserInfo()},methods:{back:function(){this.$router.go(-1)},getUserInfo:function(){var t=this,e=localStorage.getItem("CSTK");e&&(this.$toast.loading({message:"加载中...",forbidClick:!0,duration:0,loadingType:"spinner"}),this.axios({method:"GET",url:"/findAccountInfo",params:{appkey:this.appkey,tokenString:e}}).then((function(e){t.$toast.clear(),"B001"==e.data.code&&(t.userInfo=e.data.result[0])})),this.$toast.clear())},uploadUserImg:function(t){var e=this,a=localStorage.getItem("CSTK");if(a){var s=t.file.type.split("/")[1],i=["png","gif","jpg","jpeg"];if(-1!==i.indexOf(s))if(this.maxSize<t.file.size)this.$notify({message:"上传文件大小不能超过"+this.maxSize/1024+"KB",color:"#fff",background:"#49dda1"});else{var n=t.content.replace(/data:image\/[A-Za-z]+;base64,/,""),o=r["a"].queryString({appkey:this.appkey,tokenString:a,imgType:s,serverBase64Img:n});this.$toast.loading({message:"加载中...",forbidClick:!0,duration:0,loadingType:"spinner"}),this.axios({method:"POST",url:"/updateAvatar",data:o}).then((function(t){e.$toast.clear(),"H001"==t.data.code&&(e.userInfo.userImg=t.data.userImg)})),this.$toast.clear()}else this.$notify({message:"图片类型只支持"+i.join(","),color:"#fff",background:"#49dda1"})}},modifyUserInfo:function(t,e){var a=this,s=localStorage.getItem("CSTK");if(s){var i=r["a"].queryString(Object(n["a"])({appkey:this.appkey,tokenString:s},t,this.userInfo[t]));this.$toast.loading({message:"加载中...",forbidClick:!0,duration:0,loadingType:"spinner"}),this.axios({method:"POST",url:e,data:i}).then((function(t){a.$toast.clear(),a.$toast(t.data.msg)})),this.$toast.clear()}}}},c=o,l=a("2877"),u=Object(l["a"])(c,s,i,!1,null,null,null);e["default"]=u.exports},ade3:function(t,e,a){"use strict";function s(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}a.d(e,"a",(function(){return s}))},f737:function(t,e,a){}}]);
//# sourceMappingURL=chunk-fbd2e09e.f87e7362.js.map